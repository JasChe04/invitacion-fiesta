<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invitaci√≥n a tomar üéâ</title>
    
    <link rel="stylesheet" href="style.css"> 
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> 
</head>
<body>

    <div id="portada" class="overlay">
        <div class="portada-contenido entrada-elegante">
            <h1 id="tituloPorta"></h1> 
            <p class="instruccion-nombre">Escribe tu nombre :</p>
            
            <input type="text" id="inputNombre" class="name-input" placeholder="Tu nombre aqu√≠..." autocomplete="off">
            
            <button id="btnAceptar">Continuar</button> 
        </div>
    </div>
    
    <div id="beer-loader" class="overlay">
        <div class="vector-scene">
            
            <div class="mini-person mini-person-left">
                <div class="mp-head">
                    <div class="mp-hair"></div>
                    <div class="mp-eye left"></div>
                    <div class="mp-eye right"></div>
                    <div class="mp-mouth"></div>
                </div>
                <div class="mp-body"></div>
                <div class="mp-arm left"></div>
                <div class="mp-arm right">
                    <div class="mp-bottle"><div class="mpb-neck"></div></div>
                </div>
                <div class="mp-leg left"></div>
                <div class="mp-leg right"></div>
            </div>

            <div class="serving-hand-container">
                <div class="serving-hand">
                    <div class="sh-arm"></div>
                    <div class="sh-hand"></div>
                    <div class="sh-bottle">
                        <div class="shb-neck"></div>
                        <div class="shb-label"></div>
                    </div>
                </div>
            </div>

            <div class="glass-container">
                <div class="glass-body">
                    <div class="liquid"></div>
                    <div class="foam-head">
                        <div class="bubble b1"></div>
                        <div class="bubble b2"></div>
                        <div class="bubble b3"></div>
                        <div class="bubble b4"></div>
                    </div>
                </div>
            </div>

            <div class="stream"></div>

            <div class="mini-person mini-person-right">
                <div class="mp-head">
                    <div class="mp-hair female"></div> 
                    <div class="mp-eye left"></div>
                    <div class="mp-eye right"></div>
                    <div class="mp-mouth"></div>
                </div>
                <div class="mp-body female-clothes"></div> 
                <div class="mp-arm left"></div>
                <div class="mp-arm right">
                    <div class="mp-bottle"><div class="mpb-neck"></div></div>
                </div>
                <div class="mp-leg left"></div>
                <div class="mp-leg right"></div>
            </div>
        </div>
        
        <p id="loaderText" class="loader-text">Prepara tu h√≠gado...</p>
    </div>
    
    <div class="invitacion-card">
        <h1 id="tituloInvitacion" class="anim-top" style="animation-delay: 0.3s">Est√°s Invitado a tomar</h1> 
        
        <p class="subtitulo anim-top" style="animation-delay: 0.5s">A celebrar cumplea√±os de Jeyson y Christian</p>
        <p class="mensaje anim-top" style="animation-delay: 0.7s">
            ¬°Nos encantar√≠a que nos acompa√±aras a celebrar y tomar hasta perder el conocimiento!
        </p>

        <div class="detalles">
            <div class="detalle-item anim-left" style="animation-delay: 1.0s">
                <div class="icon-box"><span class="material-icons">event</span></div>
                <p class="detalle-texto">Fecha: 6 de diciembre</p>
            </div>

            <div class="detalle-item anim-right" style="animation-delay: 1.2s">
                <div class="icon-box"><span class="material-icons">schedule</span></div>
                <p class="detalle-texto">Hora: 10:00 PM</p>
            </div>

            <div class="detalle-item location-item anim-left" style="animation-delay: 1.4s">
                <div class="icon-box"><span class="material-icons">place</span></div>
                <div class="location-content">
                    <p class="detalle-texto">Lugar: Discoteca Nosso</p>
                    <a href="https://maps.app.goo.gl/xLHW33BMjp2HtFJFA" target="_blank" class="btn-ver-ubicacion">üìç</a>
                </div>
            </div>
        </div>

        <button id="btnVerObligatorio" class="boton-obligatorio anim-pop" style="animation-delay: 1.6s">
            <span class="material-icons">priority_high</span> Ver Obligatorio
        </button>
    </div>

    <div id="modal-obligatorio" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal">√ó</span>
            
            <h2 id="tituloModal">TODO ES OBLIGATORIO</h2>
            
            <ul class="lista-reglas">
                <li style="animation-delay: 0.2s">üíä Llevar hepabionta forte(Cuida tu higado)</li>
                <li style="animation-delay: 0.4s">üòé Llegar con la mejor actitud</li>
                <li style="animation-delay: 0.6s">üíã Participar en los besos de 3</li>
                <li style="animation-delay: 0.8s">üçª Tomar como pagado</li>
                <li style="animation-delay: 1.0s">üïí Quedarse hasta el final</li>
            </ul>

            <div class="container-confirmar" style="animation-delay: 1.2s">
                
                <p class="texto-final"></p>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSectZVCQa29DF6waNQOia8Asg50awCP4_nQDc8vfu_qZXe3FA/viewform?usp=sharing&ouid=104722782316420763747" class="boton-confirmar" target="_blank">
                    <span class="material-icons">check_circle</span>
                    Confirma Asistencia y Borrachera
                </a>

                <div class="divider" style="margin: 20px 0; border-top: 1px solid #333;"></div>

                <p class="texto-final" style="font-size: 1em; opacity: 0.8;">Agendar en tu borrachera:</p>
                
                <div class="calendar-buttons">
                    <a id="btnGoogleCalendar" href="#" class="boton-cal google-calendar" target="_blank">
                        <svg class="brand-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"/>
                        </svg>
                        Google
                    </a>
                    
                    <a id="btnIcsCalendar" href="#" class="boton-cal ics-calendar">
                        <svg class="brand-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" fill="currentColor">
                            <path d="M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"/>
                        </svg>
                        iOS
                    </a>
                </div>
            </div>

            <div class="nota-regalo" style="animation-delay: 1.5s">
                <p><strong>üéÅ</strong> El √∫nico regalo obligatorio es tomar. Pero si quieres insistes, todo es bienvenido</p>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const tituloElemento = document.getElementById('tituloPorta');
        const portada = document.getElementById('portada');
        const inputNombre = document.getElementById('inputNombre');
        const btnAceptar = document.getElementById('btnAceptar');
        
        const loaderText = document.getElementById('loaderText');
        const tituloInvitacion = document.getElementById('tituloInvitacion');
        const tituloModal = document.getElementById('tituloModal');

        const invitacionCard = document.querySelector('.invitacion-card');
        const beerLoader = document.getElementById('beer-loader'); 
        const btnVerObligatorio = document.getElementById('btnVerObligatorio');
        const modalObligatorio = document.getElementById('modal-obligatorio');
        const spanClose = document.querySelector('.close-modal');

        // Typing Effect
        const textoTitulo = "¬°Est√°s Invitado a Embriagarte!";
        let indiceTitulo = 0;

        function escribirTitulo() {
            if (indiceTitulo < textoTitulo.length) {
                tituloElemento.textContent += textoTitulo.charAt(indiceTitulo);
                indiceTitulo++;
                setTimeout(escribirTitulo, 80); 
            } else {
                tituloElemento.style.borderRight = 'none'; 
                inputNombre.style.opacity = '1';
                inputNombre.style.transform = 'translateY(0)';
                btnAceptar.style.opacity = '1';
                btnAceptar.style.transform = 'translateY(0)';
            }
        }

        // Logic: Process Name & Start Transition
        function procesarEntrada() {
            const nombreUsuario = inputNombre.value.trim();
            if (nombreUsuario === "") {
                alert("Por favor escribe tu nombre üçª");
                return;
            }
            const nombreFormateado = nombreUsuario.charAt(0).toUpperCase() + nombreUsuario.slice(1);

            // Personalizaci√≥n
            loaderText.textContent = `Prepara tu h√≠gado ${nombreFormateado}...`;
            tituloInvitacion.innerHTML = `${nombreFormateado},<br>¬°Est√°s Invitado a tomar!`;
            tituloModal.textContent = ` ${nombreFormateado}, TODO ES OBLIGATORIO `;

            ocultarPortada();
        }

        // Transition Logic (3s animation + 2s wait = 5s total)
        function ocultarPortada() {
            if (portada) {
                portada.style.opacity = '0'; 
                portada.style.transform = 'scale(0.9)'; 
                portada.style.pointerEvents = 'none'; 

                setTimeout(() => {
                    portada.style.display = 'none';
                    if (beerLoader) {
                        beerLoader.style.display = 'flex';
                        beerLoader.style.opacity = '1'; 
                    }
                    // CAMBIO A 5 SEGUNDOS (5000ms)
                    setTimeout(mostrarInvitacion, 5000); 
                }, 500); 
            }
        }

        function mostrarInvitacion() {
             if (beerLoader) {
                beerLoader.style.opacity = '0';
                beerLoader.style.transform = 'scale(0.9)';
             }
             setTimeout(() => {
                 if (beerLoader) beerLoader.style.display = 'none';
                 if (invitacionCard) {
                     invitacionCard.style.display = 'flex'; 
                 }
             }, 500);
        }

        // Modal Logic
        function abrirModal() {
            modalObligatorio.style.display = 'flex';
            setTimeout(() => {
                modalObligatorio.classList.add('active');
            }, 10);
        }
        function cerrarModal() {
            modalObligatorio.classList.remove('active');
            setTimeout(() => {
                modalObligatorio.style.display = 'none';
            }, 500); 
        }

        btnVerObligatorio.addEventListener('click', abrirModal);
        spanClose.addEventListener('click', cerrarModal);
        window.addEventListener('click', (event) => {
            if (event.target == modalObligatorio) {
                cerrarModal();
            }
        });

        // Calendar Logic
        const FECHA_EVENTO = "12/06";       
        const A√ëO_EVENTO = 2025;            
        const HORA_INICIO = 23;             
        const DURACION_HORAS = 5;           
        const TITULO_EVENTO = "Cumplea√±os de Jeyson y Christian";
        const DESCRIPCION = "Obligatorio toma";
        const UBICACION = "Discoteca Nosso"; 

        function formatearFecha(fecha, hora, minutos = 0) {
            const d = new Date(`${fecha}/${A√ëO_EVENTO} ${hora}:${minutos}:00`);
            const fechaFin = new Date(d);
            fechaFin.setHours(d.getHours() + DURACION_HORAS);
            const formato = (date) => {
                const y = date.getFullYear();
                const m = (date.getMonth() + 1).toString().padStart(2, '0');
                const day = date.getDate().toString().padStart(2, '0');
                const h = date.getHours().toString().padStart(2, '0');
                const min = date.getMinutes().toString().padStart(2, '0');
                return `${y}${m}${day}T${h}${min}00`;
            };
            return { start: formato(d), end: formato(fechaFin) };
        }

        const btnGoogle = document.getElementById('btnGoogleCalendar');
        const btnIcs = document.getElementById('btnIcsCalendar');

        if (btnGoogle) {
            const { start, end } = formatearFecha(FECHA_EVENTO, HORA_INICIO);
            const url = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(TITULO_EVENTO)}&dates=${start}/${end}&details=${encodeURIComponent(DESCRIPCION)}&location=${encodeURIComponent(UBICACION)}`;
            btnGoogle.href = url;
        }

        if (btnIcs) {
            btnIcs.addEventListener('click', (e) => {
                e.preventDefault();
                const { start, end } = formatearFecha(FECHA_EVENTO, HORA_INICIO);
                const icsContent = [
                    'BEGIN:VCALENDAR', 'VERSION:2.0', 'BEGIN:VEVENT',
                    `DTSTART:${start}`, `DTEND:${end}`,
                    `SUMMARY:${TITULO_EVENTO}`, `DESCRIPTION:${DESCRIPCION}`, `LOCATION:${UBICACION}`,
                    'END:VEVENT', 'END:VCALENDAR'
                ].join('\n');
                const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'evento_fiesta.ics';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            });
        }

        // Init
        window.addEventListener('load', () => {
            if(tituloElemento) tituloElemento.textContent = '';
            if (beerLoader) beerLoader.style.display = 'none'; 
            
            inputNombre.style.opacity = '0';
            inputNombre.style.transform = 'translateY(20px)';
            inputNombre.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
            
            btnAceptar.style.opacity = '0';
            btnAceptar.style.transform = 'translateY(20px)';
            btnAceptar.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';

            escribirTitulo(); 
        });

        if (btnAceptar) {
            btnAceptar.addEventListener('click', procesarEntrada);
        }
    </script>
</body>
</html>
